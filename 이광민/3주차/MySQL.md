## MySQL 8.0 구조

![image](https://user-images.githubusercontent.com/43610417/227523044-8187e695-9d0e-4650-b4d6-9181cc075829.png)

### MySQL엔진

- 접속 및 쿼리 요청을 처리하는 커넥션 핸들러
- SQL 파서
- 전처리기
- 옵티마이저

### 스토리지 엔진

- 스토리지 엔진은 실제 데이터를 디스크 스토리지에 저장하거나 읽어오는 부분을 담당한다.

![image](https://user-images.githubusercontent.com/43610417/227681780-7a54f360-5290-4175-90a7-7d41d912f0d3.png)

**MySQL 서버** 는 프로세스 기반이 아닌 스레드 기반으로 동작하며, 크게 포그라운드 스레드와 백그라운드 스레드로 구분할 수 있다.

### 포그라운드 스레드
포그라운드 스레드는 MySQL 서버에 접속된 클라이언트 수만큼 존재하며, 주로 사용자가 요청하는 쿼리 문장을 처리한다. 그 후 사용자가 작업을 마치고 커넥션을 종료하면 해당 스레드는 다시 스레드 캐시로 되돌아간다. 만약 스레드 캐시에 이미 일정 개수 이상의 스레드가 대기 중이라면 해당 스레드를 종료시켜 일정 개수의 스레드만 스래드 캐시에 존재하게 한다.

포그라운드 스레드는 데이터를 MySQL의 데이터 버퍼나 캐시로부터 가져오며, 버퍼나 캐시에 없는 경우 직접 디스크의 데이터나 인덱스 파일로부터 데이터를 읽어와 작업을 처리한다.

### 백그라운드 스레드
InnoDB 스토리지 엔진의 백그라운드 스레드에서 가장 중요한 것은 로그 스레드와 버퍼의 데이터를 디스크로 쓰기 작업을 처리하는 쓰기 스레드이다. 쓰기 스레드는 아주 많은 작업들을 백그라운드로 처리하기 때문에 디스크를 최적으로 사용할 수 있을 만큼 충분히 설정하는 것이 좋다.

일반적인 상용 DMBS에서는 쓰기 작업을 버퍼링해서 일괄 처리하는 기능이 탑재되어 있고 InnoDB 또한 이러한 방식으로 쓰기 작업을 처리한다.(MyISAM은 쓰기 버퍼링 기능을 사용할 수 없음)

이외에 인서트 버퍼를 병합하는 스레드, 데이터를 버퍼로 읽어오는 스레드, 데드락이나 잠금을 모니터링하는 스레드 등 다양한 작업들이 백그라운드 스레드에서 처리된다.

## InnoDB
핸들러에 속하는 스토리지 엔진으로 실행 엔진의 요청에 따라 데이터를 디스크로 저장하고 읽어오는 역활
